(()=>{"use strict";var t=function(){return t=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},t.apply(this,arguments)};function e(t,e,o,n,r){void 0===r&&(r=20);for(var i=Math.floor((o-t)/(r+1)),a=Math.floor((n-e)/(r+1)),d=[],c=0;c<i;c++)for(var l=0;l<a;l++)d.push({width:r,height:r,x:t+c*(r+1),y:e+l*(r+1),shape:"rect",color:"blue",type:"brick",health:1});return d}document.addEventListener("DOMContentLoaded",(function(){var o,n,r,i,a=(o={width:800,height:500,background:"black",selector:'div[data-game-id="brick-breaker"] canvas',boundaryPadding:10,boundsColor:"red",boundsThickness:2,hideMouse:!0},n=document.querySelector(o.selector),r=n.getContext("2d"),i={padding:o.boundaryPadding,left:0+o.boundaryPadding,right:o.width-o.boundaryPadding,top:0+o.boundaryPadding,bottom:o.height-o.boundaryPadding},n.width=o.width,n.height=o.height,o.hideMouse&&(n.addEventListener("mouseenter",(function(){n.style.cursor="none"})),n.addEventListener("mouseover",(function(){n.style.cursor="initial"}))),{body:n,context:r,width:o.width,height:o.height,background:o.background,bounds:i,clear:function(){r.clearRect(0,0,o.width,o.height)},drawBackground:function(){r.fillStyle=o.background,r.fillRect(0,0,o.width,o.height)},drawBoundary:function(){r.strokeStyle=o.boundsColor,r.lineWidth=o.boundsThickness,r.strokeRect(i.left,i.top,i.right-o.boundaryPadding,i.bottom-o.boundaryPadding)}}),d=function(e){var o={screen:e.screen,fontSize:16,fontName:"monospace",lineSpacing:4,labelColor:"white",valueColor:"white"},n=(e=t(t({},o),e)).screen.context,r=[function(t){var o=t.id,r=t.label,i=t.x,a=void 0===i?0:i,d=t.y,c=void 0===d?0:d;n.font="".concat(e.fontSize,"px ").concat(e.fontName);var l=0,h={topLeft:{x:0,y:0},bottomLeft:{x:0,y:0},topRight:{x:0,y:0},bottomRight:{x:0,y:0}},s="".concat(r,":"),u=n.measureText(s),f=n.measureText("".concat(l)),b=u.width+f.width,y=u.actualBoundingBoxAscent+u.actualBoundingBoxDescent;return h.topLeft={x:a,y:c},h.bottomLeft={x:a,y:c+y+e.lineSpacing},h.topRight={x:a+b,y:c},h.bottomRight={x:a+b,y:c+y+e.lineSpacing},{rect:h,id:o,label:r,value:l,updateValue:function(t){l=t},render:function(){n.font="".concat(e.fontSize,"px ").concat(e.fontName),n.fillStyle=e.labelColor,n.fillText(s,a,c),n.fillStyle=e.valueColor,n.fillText("".concat(l),a+u.width+3,c)}}}({x:20,y:35,id:"scores",label:"Scroes"})];return{items:r,getElementById:function(t){return r.find((function(e){return e.id===t}))},render:function(){for(var t=0,e=r;t<e.length;t++)e[t].render()}}}({screen:a,fontSize:16}),c=function(t){var o={platform:{width:100,height:8,x:t.screen.width/2-50,y:t.screen.height-69,shape:"rect",color:"rgb(115, 115, 115)",type:"platform"},ball:{type:"ball",color:"white",shape:"circle",x:t.screen.width/2,y:t.screen.height-75,dx:0,dy:0,width:6,height:6,angle:90,isLinkedToPlatform:!0,isWaitingStart:!0,bounces:{lastBounceFrom:null,fromBrick:0,fromPlatform:0,fromBoundary:0}},bricks:e(t.bricksGridPos.startX,t.bricksGridPos.startY,t.bricksGridPos.endX,t.bricksGridPos.endY),all:[]};return o.all=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))}([o.platform,o.ball],o.bricks,!0),{score:0,objects:o,render:function(){var e,n,r,i=t.screen.context;(function(t,e,o,n,r){void 0===r&&(r=function(t){});for(var i=t.y-t.width,a=t.y+t.width,d=t.x-t.width,c=t.x+t.width,l=e.y,h=(e.y,e.height,e.x),s=e.x+e.width,u=.4*Math.random()-.2,f=0,b=o;f<b.length;f++){var y=b[f];if(y.health>0){var g=Math.max(y.x,Math.min(t.x,y.x+y.width)),m=Math.max(y.y,Math.min(t.y,y.y+y.height)),x=t.x-g,p=t.y-m;x*x+p*p<=t.width*t.width&&(y.color="rgba(255, 255, 255, 0.05)",y.health=0,t.dx*=-1,"bound"!==t.bounces.lastBounceFrom&&(t.dy*=-1),t.bounces.fromBrick+=1,t.bounces.lastBounceFrom=y.type,r(t.bounces))}}t.isLinkedToPlatform||a>=l&&d<=s&&c>=h&&(t.y=l-t.width,function(t,e){var o=e.x+e.width/2,n=(t.x-o)/(e.width/2)*(Math.PI/3),r=Math.sqrt(Math.pow(t.dx,2)+Math.pow(t.dy,2));t.dx=r*Math.sin(n),t.dy=-r*Math.cos(n)}(t,e),function(t,e){var o=Math.sqrt(t.dx*t.dx+t.dy*t.dy),n=Math.atan2(t.dy,t.dx);n+=e,t.dx=Math.cos(n)*o,t.dy=Math.sin(n)*o}(t,u),t.bounces.fromPlatform+=1,t.bounces.lastBounceFrom=e.type),i<=n.top&&(t.y=n.top+t.width),a>=n.bottom&&(t.y=n.bottom-t.width),d<n.left&&(t.x=n.left+t.width),c>=n.right&&(t.x=n.right-t.width),(i<=n.top||a>=n.bottom)&&(t.dy*=-1),(d<n.left||c>=n.right)&&(t.dx*=-1),(i<=n.top||a>=n.bottom||d<n.left||c>=n.right)&&(t.bounces.fromBoundary+=1,t.bounces.lastBounceFrom="bound")})(o.ball,o.platform,o.bricks,t.screen.bounds,t.onBrickBreak),n=(e=o.ball).dx,r=e.dy,0===n&&0===r||(e.x+=n,e.y+=r);for(var a=0,d=o.all;a<d.length;a++){var c=d[a],l=c.shape;if("rect"===l){var h=c.x,s=c.y,u=c.width,f=c.height,b=c.color;i.fillStyle=b,i.fillRect(h,s,u,f)}else if("circle"===l){var y=c,g=(h=y.x,s=y.y,u=y.width,b=y.color,y.isLinkedToPlatform);i.beginPath(),i.arc(h,s,u,0,2*Math.PI,!1),i.fillStyle=!0===g?"green":b,i.fill(),i.closePath()}}}}}({screen:a,bricksGridPos:{startX:0+8*a.bounds.padding,startY:0+8*a.bounds.padding,endX:a.width-8*a.bounds.padding,endY:300+2*a.bounds.padding},onBrickBreak:function(t){d.getElementById("scores").updateValue(10*t.fromBrick)}});document.body.addEventListener("mousemove",(function(t){if(t.layerX>=0&&t.layerX<=a.width){var e=c.objects,o=e.platform,n=e.ball,r=t.layerX-o.width/2;r>=a.bounds.left&&r<=a.bounds.right-o.width&&(o.x=r,!0===n.isLinkedToPlatform&&(n.x=r+o.width/2))}})),a.body.addEventListener("click",(function(){if(!0===c.objects.ball.isWaitingStart){var t=c.objects.ball;t.isWaitingStart=!1,t.isLinkedToPlatform=!1,t.dx=4*Math.cos(t.angle),t.dy=-4*Math.sin(t.angle)}}));var l=function(){a.drawBackground(),a.drawBoundary(),c.render(),d.render(),requestAnimationFrame(l)};requestAnimationFrame(l)}))})();